<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700&display=swap" rel="stylesheet">

<style>
body {
    margin: 0;
    height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    background: #eee;
}

/* ★ ここは固定サイズのまま（スケールで縮小する） */
.main {
    width: 1800px;
    height: 900px;
    background: white;
    position: relative;
    overflow: hidden;

    /* ★ 追加：縮小の基準点 */
    transform-origin: top left;
}

.box {
    position: absolute;
    border: none;
    font-family: "Zen Maru Gothic", sans-serif;
}

.center {
    display: flex;
    justify-content: center;
    align-items: center;
}

.logo-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.button-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: 0.2s;
    cursor: pointer;
}
.button-img:hover {
    filter: brightness(40%);
}

.button-row {
    transition: 0.2s;
    cursor: pointer;
}
.button-row:hover {
    filter: brightness(40%);
}

.list-content {
    width: 400px;
    display: flex;
    flex-direction: column;
}

.list-item {
    height: 100px;
    display: flex;
    align-items: center;
    padding-left: 20px;
    font-size: 28px;
    border-bottom: 1px solid #cccccc;
    box-sizing: border-box;
}

#box_3 {
    display: block !important;
    overflow-y: auto;
}

.chat-area {
    width: 100%;
    height: 100%;
    overflow-y: auto;
    padding: 20px;
    box-sizing: border-box;
}

.bubble {
    max-width: 70%;
    padding: 15px 20px;
    margin-bottom: 15px;
    border-radius: 15px;
    font-size: 24px;
    line-height: 1.4;
}
.bubble.me {
    background: #d0e6ff;
    margin-left: auto;
}
.bubble.other {
    background: #eeeeee;
    margin-right: auto;
}

.chat-input {
    width: 95%;
    height: 60px;
    font-size: 28px;
    padding: 10px 20px;
    border: none;
    outline: none;
    background: #ffffff;
    border-radius: 10px;
    box-sizing: border-box;
}

.send-button {
    width: 120px;
    height: 60px;
    margin-left: 20px;
    font-size: 24px;
    border: none;
    border-radius: 10px;
    cursor: pointer;
    background: #1d3563;
    color: white;
    transition: 0.2s;
}
.send-button:hover {
    filter: brightness(80%);
}
</style>
</head>

<body>

<div class="main" id="main"></div>

<script>
/* -------------------------
   ★ 自動リサイズ機能
-------------------------- */
function resizeMain() {
    const main = document.getElementById("main");
    const baseW = 1800;
    const baseH = 900;

    const scale = Math.min(
        window.innerWidth / baseW,
        window.innerHeight / baseH
    );

    main.style.transform = `scale(${scale})`;
}

window.addEventListener("resize", resizeMain);
resizeMain();

/* -------------------------
   元のプログラム
-------------------------- */

let boxes = [];
let currentChatTarget = null;
let box3;
let box8;

function addBox(id, x, y, w, h, img=null, text="", style={}) {
    const main = document.getElementById("main");
    const box = document.createElement("div");
    box.className = "box";
    box.id = "box_" + id;
    box.style.left = x + "px";
    box.style.top = y + "px";
    box.style.width = w + "px";
    box.style.height = h + "px";

    for (const key in style) {
        if (key !== "className") {
            box.style[key] = style[key];
        }
    }

    if (img) {
        const image = document.createElement("img");
        image.src = img;
        image.className = style.className || "";
        box.appendChild(image);
    } else if (text) {
        box.textContent = text;
    }

    main.appendChild(box);
    boxes.push({ id, x, y, w, h, img, text, style });
    return box;
}

/* Box1: Logo */
addBox(1, 0, 0, 100, 100, "KURASU_logo.png", "", { className: "logo-img" });

/* Box2: Title */
const box2 = addBox(
    2, 100, 0, 300, 100, null, "KURASU",
    { background: "#ffffff", fontSize: "62px", fontWeight: "700", color: "#1d3563" }
);
box2.classList.add("center");

/* Box3: Scroll window */
box3 = addBox(
    3, 0, 100, 400, 800, null, "",
    { background: "#ffffff", overflowY: "auto" }
);

/* Box6: Chat header */
const box6 = addBox(
    6, 400, 0, 1300, 100, null, "",
    { background: "#f8f8f8", paddingLeft: "40px", fontSize: "40px", fontWeight: "700", color: "#1d3563" }
);

function selectChatTarget(name, element) {
    currentChatTarget = name;

    document.querySelectorAll(".list-item").forEach(item => {
        item.style.outline = "none";
        item.style.background = item.dataset.altcolor;
    });

    element.style.outline = "3px solid #1d3563";
    element.style.background = "#c8d6ff";
    box6.textContent = name;
}

function buildFriendsList() {
    const list = document.createElement("div");
    list.className = "list-content";

    for (let i = 0; i < 30; i++) {
        const item = document.createElement("div");
        item.className = "list-item button-row";

        const color = (i % 2 === 0) ? "#dddddd" : "#eeeeee";
        item.style.background = color;
        item.dataset.altcolor = color;

        const name = "Friend " + (i + 1);
        item.textContent = name;
        item.onclick = () => selectChatTarget(name, item);

        list.appendChild(item);
    }
    return list;
}

function buildRoomsList() {
    const list = document.createElement("div");
    list.className = "list-content";

    for (let i = 0; i < 20; i++) {
        const item = document.createElement("div");
        item.className = "list-item button-row";

        const color = (i % 2 === 0) ? "#dddddd" : "#eeeeee";
        item.style.background = color;
        item.dataset.altcolor = color;

        const name = "Room " + (i + 1);
        item.textContent = name;
        item.onclick = () => selectChatTarget(name, item);

        list.appendChild(item);
    }
    return list;
}

function showFriends() {
    box3.innerHTML = "";
    box3.appendChild(buildFriendsList());
    box3.scrollTop = 0;
}

function showRooms() {
    box3.innerHTML = "";
    box3.appendChild(buildRoomsList());
    box3.scrollTop = 0;
}

/* Default: show friends */
showFriends();

/* Box4: Friends button */
addBox(
    4, 300, 850, 50, 50, "friends.png", "",
    { className: "button-img" }
).onclick = showFriends;

/* Box5: Rooms button */
addBox(
    5, 350, 850, 50, 50, "room.png", "",
    { className: "button-img" }
).onclick = showRooms;

/* Box8: Chat message area */
box8 = addBox(
    8, 400, 100, 1300, 700, null, "",
    { background: "#ffffff", overflowY: "auto", padding: "20px", boxSizing: "border-box" }
);
box8.classList.add("chat-area");

/* Box7: Chat input area */
const box7 = addBox(
    7, 400, 800, 1300, 100, null, "",
    { background: "#eeeeee", paddingLeft: "20px", paddingTop: "20px", display: "flex", alignItems: "center" }
);

/* Create input field */
const input = document.createElement("input");
input.type = "text";
input.placeholder = "Type a message...";
input.className = "chat-input";
input.style.flex = "1";

/* Create send button */
const sendBtn = document.createElement("button");
sendBtn.textContent = "Send";
sendBtn.className = "send-button";

box7.appendChild(input);
box7.appendChild(sendBtn);

/* Send message */
function sendMessage() {
    const text = input.value.trim();
    if (text === "") return;

    const bubble = document.createElement("div");
    bubble.className = "bubble me";
    bubble.textContent = text;

    box8.appendChild(bubble);
    box8.scrollTop = box8.scrollHeight;
    input.value = "";
}

sendBtn.onclick = sendMessage;

input.addEventListener("keydown", (e) => {
    if (e.key === "Enter") {
        sendMessage();
    }
});
</script>

</body>
</html>
